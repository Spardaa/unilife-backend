# UniLife 终端客户端使用指南

## 功能简介

这是一个简易的终端前端客户端，用于测试和调试 UniLife 后端 API。

## 使用方法

### 1. 启动后端服务

在一个终端窗口中运行：

```bash
python -m app.main
```

等待看到以下信息表示服务启动成功：
```
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### 2. 启动客户端

在另一个终端窗口中运行：

```bash
python client.py
```

### 3. 开始交互

看到欢迎横幅后，你可以：

#### 与 Jarvis 对话（自然语言输入）

```
> 你好
> 帮我安排明天下午3点开会
> 我今天有什么安排
> 查询本周的会议
> 取消今天的会议
> 我现在状态怎么样
> 撤销刚才的操作
```

#### 系统命令

- `help` - 显示帮助信息
- `history` - 查看对话历史
- `clear` - 清除对话历史
- `events` - 查看所有事件
- `snapshots` - 查看快照历史
- `energy` - 查看能量状态
- `quit` 或 `exit` - 退出程序

## 功能演示

### 创建事件

```
> 帮我安排明天下午3点开会
```

**输出示例：**
```
[14:30:25] 你：
帮我安排明天下午3点开会

[14:30:27] Jarvis：
已为您安排：开会（15:00-16:00）

━━━ 执行的操作 ━━━
+ 创建事件：开会

◆ 快照已创建: a1b2c3d4...
```

### 查询事件

```
> 我今天有什么安排
```

**输出示例：**
```
[14:31:10] 你：
我今天有什么安排

[14:31:12] Jarvis：
您的安排：
○ 开会（15:00-16:00）
○ 学习（19:00-21:00）
```

### 查看所有事件

```
> events
```

**输出示例：**
```
━━━ 事件列表 (3) ━━━
○ 1. 开会 (01/22 15:00 - 16:00)
✓ 2. 学习 (01/21 19:00 - 21:00)
○ 3. 运动 (01/23 08:00 - 09:00)
```

### 查看对话历史

```
> history
```

**输出示例：**
```
━━━ 对话历史 (8 条) ━━━
你：你好
Jarvis：你好！我是 Jarvis，你的 AI 生活管家。有什么我可以帮你的吗？
你：帮我安排明天下午3点开会
Jarvis：已为您安排：开会（15:00-16:00）
...
```

## 颜色说明

- 🔵 **蓝色** - 你的输入
- 🟢 **绿色** - Jarvis 的回复
- 🟡 **黄色** - 系统消息
- 🔴 **红色** - 错误消息
- 🔵 **青色** - 列表和分隔线

## 注意事项

1. 确保后端服务已启动
2. 默认使用 `test_user_001` 作为用户 ID
3. 所有对话都会被记录，可通过 `history` 命令查看
4. 输入 `Ctrl+C` 不会退出程序，需使用 `quit` 或 `exit`
5. Windows 终端会自动处理 UTF-8 编码

## 故障排除

### 无法连接到服务器

```
✗ 错误：无法连接到服务器，请确保后端正在运行
```

**解决方法：** 检查后端服务是否已启动，并确认运行在 `http://localhost:8000`

### 请求超时

```
✗ 错误：请求超时
```

**解决方法：** 检查网络连接或后端服务是否正常响应

### API 返回错误

```
✗ 错误：API 返回错误: 500
```

**解决方法：** 查看后端日志，确认数据库是否正常初始化

## 扩展开发

客户端代码结构清晰，可轻松扩展：

- 修改 `API_BASE_URL` 连接到不同的服务器
- 修改 `USER_ID` 切换不同用户
- 在 `main()` 函数中添加新的命令处理
- 自定义 `Colors` 类更改颜色方案
- 扩展 `print_actions()` 显示更多操作细节

## 技术栈

- **Python 3.8+**
- **requests** - HTTP 请求库
- **Windows Terminal UTF-8** - 编码支持
